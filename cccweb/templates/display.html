<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>CCC A2 display</title>
<!-- 引入 echarts.js -->
<script src="/static/echarts.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <p>The top 10 word rank are</p>
    <p>{{ rlt }}</p>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="mapContainer" style="width:1000px; height:600px"></div>
    <script type="text/javascript">
        var myChart = echarts.init(document.getElementById('mapContainer'));
        $.get("https://raw.githubusercontent.com/partwith/aus-geoJson/master/states.geojson", function (response) {
            echarts.registerMap('AUS', response);
            var option = {
                title: {
                    text: 'USA Population Estimates (2012)',
                    subtext: 'Data from www.census.gov',
                    sublink: 'http://www.census.gov/popest/data/datasets.html',
                    left: 'right'
                },
                tooltip: {
                    trigger: 'item',
                    showDelay: 0,
                    transitionDuration: 0.2,
                    formatter: function (params) {
                        var value = (params.value + '').split('.');
                        value = value[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, '$1,');
                        return params.seriesName + '<br/>' + params.name + ': ' + value;
                    }
                },
                visualMap: {
                    left: 'right',
                    min: 500000,
                    max: 38000000,
                    inRange: {
                        color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                    },
                    text: ['High', 'Low'],           // 文本，默认为数值文本
                    calculable: true
                },
                toolbox: {
                    show: true,
                //orient: 'vertical',
                    left: 'left',
                    top: 'top',
                    feature: {
                        dataView: {readOnly: false},
                        restore: {},
                        saveAsImage: {}
                    }
                },
                series: [{
                    name: 'USA PopEstimates',
                    type: 'map',
                    nameProperty: 'STATE_NAME',
                    roam: true,
                    map: 'AUS',
                    aspectScale: 1,
                    top: 'middle',
                    emphasis: {
                        label: {
                            show: true
                        }
                    },
                    data:[ //这几个数据需要从后端读出来，显示到这上
                        {name: 'New South Wales', value: 4822023, emphasis: {label: {show: true, padding: [-10, 4, 5, -90]}}},
                        {name: 'Victoria', value: 731449, emphasis: {label: {show: true, padding: [20, 4, 5, -20]}}},
                        {name: 'Queensland', value: 6553255, emphasis: {label: {show: true, padding: [140, 4, 5, -10]}}},
                        {name: 'South Australia', value: 2949131, emphasis: {label: {show: true, padding: [-50, 4, 5, -10]}}},
                        {name: 'Western Australia', value: 38041430},
                        {name: 'Tasmania', value: 5187582},
                        {name: 'Northern Territory', value: 3590347},
                        {name: 'Australian Capital Territory', value: 917092},
                    ]
                }]
            };
            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption(option);
            myChart.on('click', function (params) {
                window.open('https://www.baidu.com/s?wd=' + encodeURIComponent(params.name));
            });
        });
    </script>
</body>
</html>